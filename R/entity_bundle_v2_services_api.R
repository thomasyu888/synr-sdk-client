# Platform Repository Service
#
# Platform Repository Service - Sage Bionetworks Platform 
#
# The version of the OpenAPI document: develop-SNAPSHOT
# Contact: thomas.yu@sagebionetworks.org
# Generated by: https://openapi-generator.tech

#' @docType class
#' @title EntityBundleV2Services operations
#' @description synclient.EntityBundleV2Services
#' @format An \code{R6Class} generator object
#' @field apiClient Handles the client-server communication.
#'
#' @section Methods:
#' \describe{
#' \strong{ GetEntityBundle } \emph{ Get an entity and related data with a single POST. }
#' Get an entity and related data with a single POST.
#'
#' \itemize{
#' \item \emph{ @param } id character
#' \item \emph{ @param } entity.bundle.request \link{EntityBundleRequest}
#' \item \emph{ @returnType } \link{EntityBundleV2} \cr
#'
#'
#' \item status code : 200 | Success
#'
#' \item return type : EntityBundleV2 
#' \item response headers :
#'
#' \tabular{ll}{
#' }
#' }
#'
#' \strong{ UpdateEntityBundle } \emph{ Update an entity and associated components with a single PUT. }
#' Update an entity and associated components with a single PUT. Specifically, this operation supports update of an Entity, its Annotations, and its ACL. Upon successful creation, an EntityBundle is returned containing the requested components, as defined by the partsMask in the request object. 
#'
#' \itemize{
#' \item \emph{ @param } id character
#' \item \emph{ @param } generated.by character
#' \item \emph{ @param } entity.bundle.create.v2 \link{EntityBundleCreateV2}
#' \item \emph{ @returnType } \link{EntityBundleV2} \cr
#'
#'
#' \item status code : 200 | Success
#'
#' \item return type : EntityBundleV2 
#' \item response headers :
#'
#' \tabular{ll}{
#' }
#' }
#'
#' }
#'
#'
#' @examples
#' \dontrun{
#' ####################  GetEntityBundle  ####################
#'
#' library(synclient)
#' var.id <- 'id_example' # character | The ID of an Entity.
#' var.entity.bundle.request <- EntityBundleRequest$new() # EntityBundleRequest | 
#'
#' #Get an entity and related data with a single POST.
#' api.instance <- EntityBundleV2ServicesApi$new()
#'
#' #Configure HTTP basic authorization: bearerAuth
#' # provide your username in the user-serial format
#' api.instance$apiClient$username <- '<user-serial>'; 
#' # provide your api key generated using the developer portal
#' api.instance$apiClient$password <- '<api_key>';
#'
#' result <- api.instance$GetEntityBundle(var.id, entity.bundle.request=var.entity.bundle.request)
#'
#'
#' ####################  UpdateEntityBundle  ####################
#'
#' library(synclient)
#' var.id <- 'id_example' # character | The ID of an Entity.
#' var.generated.by <- 'generated.by_example' # character | Generated by
#' var.entity.bundle.create.v2 <- EntityBundleCreateV2$new() # EntityBundleCreateV2 | The EntityBundleCreate object containing the Entity and Annotations to update. 
#'
#' #Update an entity and associated components with a single PUT.
#' api.instance <- EntityBundleV2ServicesApi$new()
#'
#' #Configure HTTP basic authorization: bearerAuth
#' # provide your username in the user-serial format
#' api.instance$apiClient$username <- '<user-serial>'; 
#' # provide your api key generated using the developer portal
#' api.instance$apiClient$password <- '<api_key>';
#'
#' result <- api.instance$UpdateEntityBundle(var.id, generated.by=var.generated.by, entity.bundle.create.v2=var.entity.bundle.create.v2)
#'
#'
#' }
#' @importFrom R6 R6Class
#' @importFrom caTools base64encode
#' @export
EntityBundleV2ServicesApi <- R6::R6Class(
  'EntityBundleV2ServicesApi',
  public = list(
    apiClient = NULL,
    initialize = function(apiClient){
      if (!missing(apiClient)) {
        self$apiClient <- apiClient
      }
      else {
        self$apiClient <- ApiClient$new()
      }
    },
    GetEntityBundle = function(id, entity.bundle.request=NULL, ...){
      apiResponse <- self$GetEntityBundleWithHttpInfo(id, entity.bundle.request, ...)
      resp <- apiResponse$response
      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        apiResponse$content
      } else if (httr::status_code(resp) >= 300 && httr::status_code(resp) <= 399) {
        apiResponse
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        apiResponse
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        apiResponse
      }
    },

    GetEntityBundleWithHttpInfo = function(id, entity.bundle.request=NULL, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- c()

      if (missing(`id`)) {
        stop("Missing required parameter `id`.")
      }

      if (!missing(`entity.bundle.request`)) {
        body <- `entity.bundle.request`$toJSONString()
      } else {
        body <- NULL
      }

      urlPath <- "/entity/{id}/bundle2"
      if (!missing(`id`)) {
        urlPath <- gsub(paste0("\\{", "id", "\\}"), URLencode(as.character(`id`), reserved = TRUE), urlPath)
      }


      resp <- self$apiClient$CallApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        deserializedRespObj <- tryCatch(
          self$apiClient$deserialize(resp, "EntityBundleV2", loadNamespace("synclient")),
          error = function(e){
             stop("Failed to deserialize response")
          }
        )
        ApiResponse$new(deserializedRespObj, resp)
      } else if (httr::status_code(resp) >= 300 && httr::status_code(resp) <= 399) {
        ApiResponse$new(paste("Server returned " , httr::status_code(resp) , " response status code."), resp)
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        ApiResponse$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        ApiResponse$new("API server error", resp)
      }
    },
    UpdateEntityBundle = function(id, generated.by=NULL, entity.bundle.create.v2=NULL, ...){
      apiResponse <- self$UpdateEntityBundleWithHttpInfo(id, generated.by, entity.bundle.create.v2, ...)
      resp <- apiResponse$response
      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        apiResponse$content
      } else if (httr::status_code(resp) >= 300 && httr::status_code(resp) <= 399) {
        apiResponse
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        apiResponse
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        apiResponse
      }
    },

    UpdateEntityBundleWithHttpInfo = function(id, generated.by=NULL, entity.bundle.create.v2=NULL, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- c()

      if (missing(`id`)) {
        stop("Missing required parameter `id`.")
      }

      queryParams['generatedBy'] <- generated.by

      if (!missing(`entity.bundle.create.v2`)) {
        body <- `entity.bundle.create.v2`$toJSONString()
      } else {
        body <- NULL
      }

      urlPath <- "/entity/{id}/bundle2"
      if (!missing(`id`)) {
        urlPath <- gsub(paste0("\\{", "id", "\\}"), URLencode(as.character(`id`), reserved = TRUE), urlPath)
      }


      resp <- self$apiClient$CallApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "PUT",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        deserializedRespObj <- tryCatch(
          self$apiClient$deserialize(resp, "EntityBundleV2", loadNamespace("synclient")),
          error = function(e){
             stop("Failed to deserialize response")
          }
        )
        ApiResponse$new(deserializedRespObj, resp)
      } else if (httr::status_code(resp) >= 300 && httr::status_code(resp) <= 399) {
        ApiResponse$new(paste("Server returned " , httr::status_code(resp) , " response status code."), resp)
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        ApiResponse$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        ApiResponse$new("API server error", resp)
      }
    }
  )
)
